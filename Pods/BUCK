load("//Config:buck_rule_macros.bzl", "apple_third_party_lib")

apple_third_party_lib(
    name = "Alamofire",
    srcs = glob([
        "Pods/Alamofire/**/*.swift",
    ]),
    frameworks = [
        "$SDKROOT/System/Library/Frameworks/CFNetwork.framework",
    ],
)

apple_third_party_lib(
    name = "CryptoSwift",
    srcs = glob([
        "Pods/CryptoSwift/**/*.swift",
    ]),
)

apple_third_party_lib(
    name = "Differentiator",
    srcs = glob([
        "Pods/Differentiator/**/*.swift",
    ]),
)

apple_third_party_lib(
    name = "ESPullToRefresh",
    srcs = glob([
        "Pods/ESPullToRefresh/**/*.swift",
    ]),
)

apple_third_party_lib(
    name = "JXPatternLock",
    srcs = glob([
        "Pods/JXPatternLock/**/*.swift",
    ]),
    frameworks = [
        "$SDKROOT/System/Library/Frameworks/Foundation.framework",
        "$SDKROOT/System/Library/Frameworks/UIKit.framework",
    ],
)

apple_third_party_lib(
    name = "Kingfisher",
    srcs = glob([
        "Pods/Kingfisher/**/*.swift",
    ]),
    frameworks = [
        "$SDKROOT/System/Library/Frameworks/CFNetwork.framework",
        "$SDKROOT/System/Library/Frameworks/Accelerate.framework",
    ],
)

apple_third_party_lib(
    name = "Moya",
    srcs = glob([
        "Pods/Moya/**/*.swift",
    ]),
    deps = [
        ":RxSwift",
    ],
)

apple_third_party_lib(
    name = "PromiseKit",
    visibility = ["PUBLIC"],
    exported_headers = glob([
        "Pods/PromiseKit/**/*.h",
    # We are excluding this header because a) it is not public and b) `PromiseKit` does not
    # consider it to be a source in its `podspec`: https://github.com/mxcl/PromiseKit/blob/a20df65b74b3eec290e524abb9839412542328b6/PromiseKit.podspec#L114
    ], exclude = [
        "Pods/PromiseKit/AnyPromise+Private.h",
    ]),
    srcs = glob([
        "Pods/PromiseKit/**/*.m",
        "Pods/PromiseKit/**/*.swift",
    # We are excluding the below sources since `PromiseKit` does not consider them sources in its
    # `podspec`: https://github.com/mxcl/PromiseKit/blob/a20df65b74b3eec290e524abb9839412542328b6/PromiseKit.podspec#L114
    ], exclude = [
        "Pods/PromiseKit/Sources/PMKCallVariadicBlock.m",
        "Pods/PromiseKit/Sources/NSMethodSignatureForBlock.m",
    ]),
)

apple_third_party_lib(
    name = "RxCocoa",
    visibility = ["PUBLIC"],
    exported_headers = glob([
        "Pods/RxCocoa/**/*.h",
    ]),
    srcs = glob([
        "Pods/RxCocoa/**/*.m",
        "Pods/RxCocoa/**/*.swift",
    ], exclude = [
        "Pods/RxCocoa/macOS/*.swift",
    ]),
    deps = [
        ":RxSwift",
        ":RxRelay",
    ],
)

apple_third_party_lib(
    name = "RxDataSources",
    srcs = glob([
        "Pods/RxDataSources/**/*.swift",
    ]),
    deps = [
        ":Differentiator",
        ":RxSwift",
        ":RxCocoa",
    ],
)

apple_third_party_lib(
    name = "RxRelay",
    srcs = glob([
        "Pods/RxRelay/**/*.swift",
    ]),
    deps = [
        ":RxSwift",
    ],
)

apple_third_party_lib(
    name = "RxSwift",
    srcs = glob([
        "Pods/RxSwift/**/*.swift",
    ],exclude = [
        "RxSwift/Platform/**/*.swift",
    ]),
)

apple_third_party_lib(
    name = "SnapKit",
    srcs = glob([
        "Pods/SnapKit/**/*.swift",
    ]),
)

apple_third_party_lib(
    name = "SwiftyJSON",
    srcs = glob([
        "Pods/SwiftyJSON/**/*.swift",
    ]),
)

apple_third_party_lib(
    name = "Then",
    srcs = glob([
        "Pods/Then/**/*.swift",
    ]),
)

apple_third_party_lib(
    name = "SocketIO",
    srcs = glob([
        "Pods/SocketIO/**/*.swift",
    ],exclude = [
        ":Starscream",
    ]),
)

apple_third_party_lib(
    name = "Starscream",
    srcs = glob([
        "Pods/Starscream/**/*.swift",
    ]),
)